import{u as f}from"./app.min.js";import"./popup.min.js";class u{constructor(){this.daClassname="--dynamic",this.init()}init(){this.objects=[],this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(e=>{const s=e.dataset.flsDynamic.trim().split(","),a={};a.element=e,a.parent=e.parentNode;const i=s[0]?.trim(),o=s[1]?.trim()||"767.98",l=s[2]?.trim()||"last",c=s[3]?.trim()||"max";a.breakpoint=o,a.place=l,a.type=c,a.index=this.indexInParent(a.parent,a.element);const n=document.querySelector(i);n&&(a.destination=n),this.objects.push(a)}),this.arraySort(this.objects);const r={};this.objects.forEach(e=>{const t=`(${e.type}-width: ${e.breakpoint/16}em),${e.breakpoint},${e.type}`;r[t]||(r[t]=[]),r[t].push(e)}),Object.entries(r).forEach(([e,t])=>{const[s,a,i]=e.split(","),o=window.matchMedia(s);o.addEventListener("change",()=>{this.mediaHandler(o,t)}),this.mediaHandler(o,t)})}mediaHandler(r,e){r.matches?e.forEach(t=>{t.destination&&this.moveTo(t.place,t.element,t.destination)}):e.forEach(({parent:t,element:s,index:a})=>{s.classList.contains(this.daClassname)&&this.moveBack(t,s,a)})}moveTo(r,e,t){e.classList.add(this.daClassname);const s=r==="last"||r==="first"?r:parseInt(r,10);s==="last"||s>=t.children.length?t.append(e):s==="first"?t.prepend(e):t.children[s].before(e)}moveBack(r,e,t){e.classList.remove(this.daClassname),r.children[t]!==void 0?r.children[t].before(e):r.append(e)}indexInParent(r,e){return[...r.children].indexOf(e)}arraySort(r){r.sort((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:e.place==="first"||t.place==="last"?-1:e.place==="last"||t.place==="first"?1:0:e.breakpoint-t.breakpoint)}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>new u);class g{constructor(r){let e={logging:!0};this.config=Object.assign(e,r),this.observer,document.documentElement.hasAttribute("data-fls-watch")||this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.setAttribute("data-fls-watch",""),this.scrollWatcherConstructor(document.querySelectorAll("[data-fls-watcher]"))}scrollWatcherConstructor(r){r.length&&f(Array.from(r).map(function(t){if(t.dataset.flsWatcher==="navigator"&&!t.dataset.flsWatcherThreshold){let s;t.clientHeight>2?(s=window.innerHeight/2/(t.clientHeight-1),s>1&&(s=1)):s=1,t.setAttribute("data-fls-watcher-threshold",s.toFixed(2))}return`${t.dataset.flsWatcherRoot?t.dataset.flsWatcherRoot:null}|${t.dataset.flsWatcherMargin?t.dataset.flsWatcherMargin:"0px"}|${t.dataset.flsWatcherThreshold?t.dataset.flsWatcherThreshold:0}`})).forEach(t=>{let s=t.split("|"),a={root:s[0],margin:s[1],threshold:s[2]},i=Array.from(r).filter(function(l){let c=l.dataset.flsWatcherRoot?l.dataset.flsWatcherRoot:null,n=l.dataset.flsWatcherMargin?l.dataset.flsWatcherMargin:"0px",d=l.dataset.flsWatcherThreshold?l.dataset.flsWatcherThreshold:0;if(String(c)===a.root&&String(n)===a.margin&&String(d)===a.threshold)return l}),o=this.getScrollWatcherConfig(a);this.scrollWatcherInit(i,o)})}getScrollWatcherConfig(r){let e={};if(document.querySelector(r.root)?e.root=document.querySelector(r.root):r.root,e.rootMargin=r.margin,!(r.margin.indexOf("px")<0&&r.margin.indexOf("%")<0)){if(r.threshold==="prx"){r.threshold=[];for(let t=0;t<=1;t+=.005)r.threshold.push(t)}else r.threshold=r.threshold.split(",");return e.threshold=r.threshold,e}}scrollWatcherCreate(r){this.observer=new IntersectionObserver((e,t)=>{e.forEach(s=>{this.scrollWatcherCallback(s,t)})},r)}scrollWatcherInit(r,e){this.scrollWatcherCreate(e),r.forEach(t=>this.observer.observe(t))}scrollWatcherIntersecting(r,e){r.isIntersecting?e.classList.contains("--watcher-view")||e.classList.add("--watcher-view"):e.classList.contains("--watcher-view")&&e.classList.remove("--watcher-view")}scrollWatcherOff(r,e){e.unobserve(r)}scrollWatcherCallback(r,e){const t=r.target;this.scrollWatcherIntersecting(r,t),t.hasAttribute("data-fls-watcher-once")&&r.isIntersecting&&this.scrollWatcherOff(t,e),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:r}}))}}document.querySelector("[data-fls-watcher]")&&window.addEventListener("load",()=>new g({}));
